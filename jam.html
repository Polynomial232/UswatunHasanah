<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="./src/tailwind.css">
    <title>Document</title>
</head>
<body>
    <div id="shalat" class="flex justify-center items-center bg-emerald-500 gap-4">
        <div class="flex flex-col justify-center items-center">Imsak  <span id="imsak">00:00</span></div>
        <div class="flex flex-col justify-center items-center">Subuh  <span id="subuh">00:00</span></div>
        <div class="flex flex-col justify-center items-center">Dhuha  <span id="dhuha">00:00</span></div>
        <div class="flex flex-col justify-center items-center">Dzuhur <span id="dzuhur">00:00</span></div>
        <div class="flex flex-col justify-center items-center">Ashar  <span id="ashar">00:00</span></div>
        <div class="flex flex-col justify-center items-center">Maghrib <span id="maghrib">00:00</span></div>
        <div class="flex flex-col justify-center items-center">Isya  <span id="isya">00:00</span></div>
    </div>

    <div id="time"></div>
    <div id="day"></div>
    <div id="date"></div>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.6.0/jquery.min.js" integrity="sha512-894YE6QWD5I59HgZOGReFYm4dnWc1Qt5NtvYSaNcOP+u1T9qYdvdihz0PPSiiqn/+/3e7Jo4EaG7TubfWGUrMQ==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>

    <script>
        var now = new Date()
        now = `${now.getFullYear()}-${('0' + (now.getMonth()+1)).slice(-2)}-${now.getDate()}`

        $.ajax({
            url: 'https://api.banghasan.com/sholat/format/json/jadwal/kota/667/tanggal/'+now,
            type: 'get',
            dataType: 'json',
            success: function (e) {
                var jadwal = e.jadwal.data

                $('#imsak').text(jadwal.imsak)
                $('#subuh').text(jadwal.subuh)
                $('#dhuha').text(jadwal.dhuha)
                $('#dzuhur').text(jadwal.dzuhur)
                $('#ashar').text(jadwal.ashar)
                $('#maghrib').text(jadwal.maghrib)
                $('#isya').text(jadwal.isya)
            }
        })
        
        const getCurrentTimeDate = () => {
            let currentTimeDate = new Date();

            var weekday = new Array(7);
            weekday[0] = "Minggu";
            weekday[1] = "Senin";
            weekday[2] = "Selasa";
            weekday[3] = "Rabu";
            weekday[4] = "Kamis";
            weekday[5] = "Jumat";
            weekday[6] = "Sabtu";

            var month = new Array();
            month[0] = "Januari";
            month[1] = "Februari";
            month[2] = "Maret";
            month[3] = "April";
            month[4] = "Mei";
            month[5] = "Juni";
            month[6] = "Juli";
            month[7] = "Agustus";
            month[8] = "September";
            month[9] = "Ocotber";
            month[10] = "November";
            month[11] = "Desember";

            var hours   =  currentTimeDate.getHours();

            var minutes =  currentTimeDate.getMinutes();
            minutes = minutes < 10 ? '0'+minutes : minutes;

            var seconds =  currentTimeDate.getSeconds();
            seconds = seconds < 10 ? '0'+seconds : seconds;

            var currentTime = `${hours}:${minutes}:${seconds}`;
            var currentDay = weekday[currentTimeDate.getDay()];

            var currentDate  = currentTimeDate.getDate();
            var currentMonth = month[currentTimeDate.getMonth()];
            var CurrentYear = currentTimeDate.getFullYear();

            var fullDate = `${currentDate} ${currentMonth} ${CurrentYear}`;


            $("#time").text(currentTime);
            $("#day").text(currentDay);
            $("#date").text(fullDate);

            setTimeout(getCurrentTimeDate, 1000);

        }
        getCurrentTimeDate();
    </script>

</body>
</html>